architectur window nt russbot window nt architectur window nt oper system famili architectur consist layer user mode kernel mode mani differ modul layer window nt window nt window nt window nt window window xp window server window vista window server window nt famili comput oper system produc microsoft preemptiv reentrant oper system design work uniprocessor symmetr multi processor smp base comput process inputoutput io request packetdriven io util io request packet irp asynchron io start window microsoft began version window availablebefor thi oper system onli exist version architectur window nt highli modular consist main layer compon user mode compon kernel mode program subsystem user mode limit term system resourc access kernel mode ha unrestrict access system memori extern devic kernel oper system thi hybrid kernel thi term disput argu essenti system execut kernel mode monolith kernel structur microkernel architectur compris simpl kernel hardwar abstract layer hal driver rang servic collect execut exist kernel mode user mode window nt subsystem capabl pass io request appropri kernel mode softwar driver io manag subsystem user mode layer window nt environ subsystem applic written mani differ type oper system integr subsystem oper system specif function behalf environ subsystem kernel mode window nt ha full access hardwar system resourc comput kernel mode user mode servic applic access critic area oper system access execut interfac user mode subsystem deal io object manag secur process manag kernel sit hardwar abstract layer execut provid multiprocessor synchron thread interrupt schedul dispatch trap handl dispatch kernel respons initi devic driver bootup kernel mode driver exist three level highest level driver intermedi driver low level driver window driver model wdm exist intermedi layer wa mainli design binari sourc compat window window lowest level driver legaci window nt devic driver control devic directli pnp hardwar bu user mode user mode subsystem pass io request appropri kernel mode driver io manag exist kernel mode subsystem user mode layer window nt environ subsystem integr subsystem environ subsystem wa design applic written mani differ type oper system environ subsystem directli access hardwar request access memori resourc virtual memori manag kernel mode applic lower prioriti kernel mode process three main environ subsystem subsystem subsystem posix subsystem environ subsystem window applic consol well text window support shutdown harderror handl environ subsystem support virtual machin vdm allow msdo window applic window nt specif msdo vdm address space emul intel msdo program howev vdm program default process thu address space vdm program thread howev window nt doe allow user program separ vdm allow program preemptiv multitask window nt will preempt vdm process onli applic environ subsystem process csrssex includ window manag function sometim refer window manag handl input event keyboard mous pass messag applic receiv thi input applic respons draw refresh window menu respons messag environ subsystem support characterbas applic emul graphic applic posix environ subsystem support applic strictli written standard relat iso iec standard posix subsystem ha area activ develop major featur window comput cluster server integr subsystem oper system specif function behalf environ subsystem consist secur subsystem workstat servic server servic secur subsystem deal secur token grant deni access user account base resourc permiss handl login request initi login authent determin system resourc audit window nt activ directori workstat servic api network redirector provid comput access network server servic api allow comput provid network servic kernel mode window nt kernel mode ha full access hardwar system resourc comput code protect memori area control access schedul thread priorit memori manag interact hardwar kernel mode user mode servic applic access critic area oper system access user mode process kernel mode perform oper behalf architectur support differ privileg level number onli extrem privileg level usermod program cpl kernel cpl level refer ring ring respect design decis achiev code portabl risc platform onli support privileg level contribut fact ring alreadi power allow privileg escal ring exampl modifi io bitmap kernel mode consist execut servic mani modul specif task kernel driver kernel hardwar abstract layer hal execut execut interfac user mode subsystem deal io object manag secur process manag inform divid sever subsystem cach manag configur manag io manag local procedur call lpc memori manag object manag process structur secur refer monitor srm group togeth compon call execut servic intern system servic intern nt ie system call implement thi level veri call directli kernel layer better perform term servic thi context gener refer callabl routin set callabl routin thi distinct concept servic process user mode compon analog daemon unixlik oper system object window nt exist global namespac thi screenshot sysintern winobj object manag object manag intern ob execut subsystem execut subsystem especi system call pass gain access window nt resourcesessenti resourc manag infrastructur servic object manag reduc duplic object resourc manag function execut subsystem potenti lead bug develop window nt harder object manag resourc object resourc physic resourc file system peripher logic resourc file object ha structur object type object manag object creation process phase creation insert creation caus alloc empti object reserv ani resourc requir object manag option namespac creation wa success subsystem respons creation fill empti object final subsystem deem initi success instruct object manag insert object access option cooki call handl lifetim object handl object manag subsystem object work condit signal object manag dispos handl purpos unix file descriptor repres refer kernel resourc opaqu valu similarli open object subject secur check exist open handl onli limit level access request object wa open creat object type defin object procedur ani data specif object thi object manag allow window nt object orient oper system object type thought polymorph class defin object subsystem notabl io manag reli default implement object type procedur instanc object creat store paramet pass object creation function secur attribut pointer object type object object close procedur refer count object manag mani object system refer object therebi determin object destroy close request everi object exist hierarch object namespac cach control close coordin memori manag io manag io driver provid common cach regular file io uniqu window cach manag oper file block devic block consist oper local remot file ensur degre coher memorymap view file sinc cach block special case memorymap view cach special case fault configur manag implement window registri io manag allow devic commun usermod subsystem translat usermod read write command read write irp pass devic driver accept file system io request translat devic specif call incorpor lowlevel devic driver directli manipul hardwar read input write output includ cach manag improv disk perform cach read request write disk background local procedur call lpc provid interprocess commun port connect semant lpc port usermod subsystem commun client execut subsystem commun usermod subsystem basi local transport msrpc memori manag manag virtual memori control memori protect memori physic memori secondari storag implement generalpurpos alloc physic memori implement parser pe execut execut map unmap singl atom step start window nt server termin server edit memori manag implement socal session space rang kernelmod memori subject context switch usermod memori thi multipl instanc kernelmod subsystem gdi driver sidebysid despit shortcom initi design session space share sever process collect refer session ensur degre isol session introduc object type associ process session handl secur refer monitor attribut secur subject token onli chang hold special privileg rel unsophist adhoc natur session fact nt initi design develop minim disrupt main third parti citrix prerequisit termin server product window nt call winfram start window vista session final becam proper aspect window architectur longer memori manag construct creep user mode indirectli expand pervas abstract affect execut subsystem matter fact regular window vista alway result multisess environ process structur handl process thread creation termin implement concept job group process termin place share restrict total maximum alloc memori cpu time pnp manag handl plug play support devic detect instal boot time ha respons start devic demandthi happen bu usb firewir gain devic devic driver load support bulk actual implement user mode plug play servic handl complex task instal appropri driver notifi servic applic arriv devic display gui user power manag deal power event poweroff standbi hibern notifi affect driver special irp power irp secur refer monitor srm primari author enforc secur rule secur integr subsystem determin object resourc access access control list acl themselv access control entri ace ace secur identifi sid list oper ace select group trusteesa user account group account login session permiss allow deni audit resourc gdi graphic devic interfac respons task draw curv render font handl palett window introduc nativ alpha blend gdi kernel kernel sit hal execut provid multiprocessor synchron thread interrupt schedul dispatch trap handl dispatch respons initi devic driver bootup necessari oper system kernel perform task tradit microkernel strict distinct execut kernel promin remnant origin microkernel design histor design document consist refer kernel compon microkernel kernel interfac process manag level abstract kernel call process manag onli save hand corner case point function depend kernelmod driver window nt kernelmod devic driver enabl interact hardwar devic driver ha well defin system routin intern routin export rest oper system devic user mode code file object io manag io manag devic devic object defin file devic driver object kernel mode driver exist three level highest level driver intermedi driver low level driver highest level driver file system driver fat ntf reli intermedi driver intermedi driver consist function driversor main driver devicethat option sandwich lower higher level filter driver function driver reli bu driveror driver servic bu control adapt bridgewhich option bu filter driver sit function driver intermedi driver reli lowest level driver function window driver model wdm exist intermedi layer lowest level driver legaci window nt devic driver control devic directli pnp hardwar bu lower level driver directli control hardwar reli ani driver hardwar abstract layer window nt hardwar abstract layer hal layer physic hardwar comput rest oper system wa design hide differ hardwar therefor provid consist platform kernel hal includ hardwarespecif code control io interfac interrupt control multipl processor howev despit purpos design place architectur hal nt layer sit entir kernel kernel sit execut hal implement depend measur kernel execut practic thi kernel hal variant match set specif engin work togeth hardwar abstract doe involv abstract instruct set gener fall wider concept portabl abstract instruct set necessari handl sever revis instruct set emul math coprocessor perform kernel platform virtual note refer note appendix nonn applic window profession microsoft window profession resourc kit microsoft ms window nt kernelmod user gdi white paper window nt workstat document microsoft technet retriev russinovich solomon russinovich introduct russinovich object type russinovich solomon russinovich solomon russinovich object impact session isol servic driver window vista microsoft activ directori data storag microsoft truste definit msdn siyan ace definit msdn solomon russinovich refer finnel lynn mcse exam microsoft window server microsoft press isbn russinovich mark octob insid nt object manag window pro activ directori data storag microsoft retriev solomon david russinovich mark insid microsoft window third edit microsoft press isbn russinovich mark david solomon microsoft window intern edit microsoft press isbn siyan kanajit window profession refer rider isbn window nt minwin unix architectur extern link microsoft offici window site window plug play architectur microsoft window compon core aero cleartyp desktop window manag directx explor taskbar start menu shell namespac special folder file associ search save search ifilt graphic devic interfac wim gener tcpip stack server messag block net framework audio print xml paper specif activ script wsh vbscript jscript ole ole autom dcom activex activex document structur storag transact server previou version wddm uaa consol manag tool backup restor center commandcom cmdex control panel applet devic manag disk cleanup disk defragment event viewer manag consol netsh problem report solut sysprep system configur task manag system file checker system restor window instal window powershel window updat winsat window easi transfer system polici editor applic calcul calendar charact map contact dvd maker fax scan internet explor journal mail magnifi media center meet space mobil devic center mobil center movi maker narrat notepad paint photo galleri privat charact editor remot assist sidebar snip tool sound record window media player window speech recognit wordpad game chess titan freecel heart hold em inkbal mahjong titan minesweep purbl place solitair spider solitair tinker kernel ntoskrnlex haldll system idl process svchostex registri window servic servic control manag dll exe ntldr boot manag winlogon recoveri consol io winr winp kernel patch protect servic autorun bit task schedul wireless configur shadow copi window error report multimedia class schedul clf file system ntf hard link junction point mount point repars point symbol link txf ef exfat cdf udf df server domain activ directori dn group polici roam user profil folder redirect distribut transact coordin msmq window sharepoint servic window media servic manag servic ii termin servic wsu network access protect df replic remot differenti compress print servic unix remot instal servic window deploy servic window system resourc manag hyperv architectur nt seri architectur object manag startup process vista io request packet kernel transact manag logic disk manag secur account manag window resourc protect lsass csrss smss secur uac bitlock defend dep protect media path mandatori integr control uipi window firewal secur center compat unix subsystem microsoft posix interix virtual machin window window