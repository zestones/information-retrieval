architectur window nt tz russbot window nt architectur window nt oper system famili architectur consist layer user mode kernel mode modul layer window nt window nt window nt window nt window window xp window server window vista window server window nt famili comput oper system produc microsoft preemptiv reentrant oper system design work uniprocessor symmetr multi processor smpbase comput process inputoutput io request packetdriven io util io request packet irp asynchron io start window microsoft began make bit version window availablebefor oper system exist bit version architectur window nt highli modular consist main layer compon user mode compon kernel mode program subsystem user mode limit term system resourc access kernel mode unrestrict access system memori extern devic kernel oper system hybrid kernel term disput argu essenti part system execut kernel mode make monolith kernel structur microkernel architectur compris simpl kernel hardwar abstract layer hal driver rang servic collect name execut exist kernel mode user mode window nt subsystem capabl pass io request appropri kernel mode softwar driver io manag subsystem user mode layer window nt environ subsystem run applic written type oper system integr subsystem oper system specif function behalf environ subsystem kernel mode window nt full access hardwar system resourc comput kernel mode stop user mode servic applic access critic area oper system access execut interfac user mode subsystem deal io object manag secur process manag kernel sit hardwar abstract layer execut provid multiprocessor synchron thread interrupt schedul dispatch trap handl except dispatch kernel respons initi devic driver bootup kernel mode driver exist three level highest level driver intermedi driver low level driver window driver model wdm exist intermedi layer design binari sourc compat window window lowest level driver legaci window nt devic driver control devic directli pnp hardwar bu user mode user mode subsystem pass io request appropri kernel mode driver io manag exist kernel mode subsystem user mode layer window nt environ subsystem integr subsystem environ subsystem design applic written type oper system environ subsystem directli access hardwar request access memori resourc virtual memori manag run kernel mode applic lower prioriti kernel mode process three main environ subsystem win subsystem os subsystem posix subsystem win environ subsystem bit window applic consol well text window support shutdown harderror handl environ subsystem support virtual do machin vdm allow msdo bit window win applic window nt specif msdo vdm run address space emul intel run msdo win program win vdm program default run process address space win vdm program thread window nt allow user win program separ win vdm allow program preemptiv multitask window nt will preempt vdm process run applic win environ subsystem process csrssex includ window manag function refer window manag handl input event keyboard mous pass messag applic receiv input applic respons draw refresh window menu respons messag os environ subsystem support bit characterbas os applic emul os bit graphic os applic os posix environ subsystem support applic strictli written posix standard iso iec standard posix subsystem area activ develop major featur window comput cluster server integr subsystem oper system specif function behalf environ subsystem consist secur subsystem workstat servic server servic secur subsystem deal secur token grant deni access user account base resourc permiss handl login request initi login authent determin system resourc audit window nt activ directori workstat servic api network redirector comput access network server servic api allow comput provid network servic kernel mode window nt kernel mode full access hardwar system resourc comput run code protect memori area control access schedul thread priorit memori manag interact hardwar kernel mode stop user mode servic applic access critic area oper system access user mode process kernel mode perform oper behalf architectur support privileg level number extrem privileg level usermod program cpl kernel run cpl level refer ring ring design decis achiev code portabl risc platform support privileg level contribut fact ring power allow privileg escal ring exampl modifi io bitmap kernel mode consist execut servic modul specif task kernel driver kernel hardwar abstract layer hal execut execut interfac user mode subsystem deal io object manag secur process manag inform divid subsystem cach manag configur manag io manag local procedur call lpc memori manag object manag process structur secur refer monitor srm group compon call execut servic intern system servic intern nt system call implement level call directli kernel layer better perform term servic context gener refer callabl routin set callabl routin distinct concept servic process user mode compon analog daemon unixlik oper system object window nt exist global namespac screenshot sysintern winobj object manag object manag intern ob execut subsystem execut subsystem system call pass gain access window nt resourcesessenti make resourc manag infrastructur servic object manag reduc duplic object resourc manag function execut subsystem lead bug develop window nt harder object manag resourc object resourc physic resourc file system peripher logic resourc file object structur object type object manag object creation process phase creation insert creation alloc empti object reserv resourc requir object manag option namespac creation success subsystem respons creation fill empti object final subsystem deem initi success instruct object manag insert object access option cooki call handl lifetim object handl object manag subsystem object work condit signal object manag dispos handl purpos unix file descriptor repres refer kernel resourc opaqu open object subject secur check act exist open handl limit level access request object open creat object type defin object procedur data specif object object manag allow window nt object orient oper system object type thought polymorph class defin object subsystem notabl except io manag reli default implement object type procedur instanc object creat store paramet pass object creation function secur attribut pointer object type object object close procedur refer count object manag object system refer object determin object destroy close request name object exist hierarch object namespac cach control close coordin memori manag io manag io driver provid common cach regular file io uniqu window cach manag oper file block devic block consist oper local remot file ensur degre coher memorymap view file cach block special case memorymap view cach miss special case fault configur manag implement window registri io manag allow devic commun usermod subsystem translat usermod read write command read write irp pass devic driver accept file system io request translat devic specif call incorpor lowlevel devic driver directli manipul hardwar read input write output includ cach manag improv disk perform cach read request write disk background local procedur call lpc interprocess commun port connect semant lpc port usermod subsystem commun client execut subsystem commun usermod subsystem basi local transport msrpc memori manag manag virtual memori control memori protect page memori physic memori secondari storag implement generalpurpos alloc physic memori implement parser pe execut execut map unmap singl atom step start window nt server termin server edit memori manag implement socal session space rang kernelmod memori subject context switch usermod memori multipl instanc kernelmod win subsystem gdi driver sidebysid despit shortcom initi design session space share process collect refer session ensur degre isol session introduc object type associ process session handl secur refer monitor attribut secur subject token chang hold special privileg unsophist adhoc natur session fact werent initi design develop minim disrupt main third parti citrix prerequisit termin server product window nt call winfram start window vista session final proper aspect window architectur longer memori manag construct creep user mode indirectli win expand pervas abstract execut subsystem matter fact regular window vista multisess environ process structur handl process thread creation termin implement concept job group process termin share restrict total maximum alloc memori cpu time pnp manag handl plug play support devic detect instal boot time respons start devic demandthi happen bu usb firewir gain devic devic driver load support bulk implement user mode plug play servic handl complex task instal appropri driver notifi servic applic arriv devic display gui user power manag deal power event poweroff standbi hibern notifi driver special irp power irp secur refer monitor srm primari author enforc secur rule secur integr subsystem determin object resourc access access control list acl access control entri ace ace secur identifi sid list oper ace select group trusteesa user account group account login sessionpermiss allow deni audit resourc gdi graphic devic interfac respons task draw line curv render font handl palett window introduc nativ alpha blend gdi kernel kernel sit hal execut multiprocessor synchron thread interrupt schedul dispatch trap handl except dispatch respons initi devic driver bootup oper system run kernel perform task tradit microkernel strict distinct execut kernel promin remnant origin microkernel design histor design document consist refer kernel compon microkernel kernel interfac process manag level abstract kernel call process manag save hand corner case point function depend kernelmod driver window nt kernelmod devic driver enabl interact hardwar devic driver well defin system routin intern routin export rest oper system devic user mode code file object io manag io manag devic devic object defin file devic driver object kernel mode driver exist three level highest level driver intermedi driver low level driver highest level driver file system driver fat ntf reli intermedi driver intermedi driver consist function driversor main driver devicethat option sandwich lower higher level filter driver function driver reli bu driveror driver servic bu control adapt bridgewhich option bu filter driver sit function driver intermedi driver reli lowest level driver function window driver model wdm exist intermedi layer lowest level driver legaci window nt devic driver control devic directli pnp hardwar bu lower level driver directli control hardwar reli driver hardwar abstract layer window nt hardwar abstract layer hal layer physic hardwar comput rest oper system design hide differ hardwar provid consist platform kernel hal includ hardwarespecif code control io interfac interrupt control multipl processor despit purpos design place architectur hal isnt layer sit entir kernel kernel sit execut hal implement depend measur kernel execut practic kernel hal variant match set engin work hardwar abstract involv abstract instruct set gener fall wider concept portabl abstract instruct set handl revis instruct set emul miss math coprocessor perform kernel platform virtual note refer note appendix run nonn applic window profession microsoft window profession resourc kit microsoft ms window nt kernelmod user gdi white paper window nt workstat document microsoft technet retriev russinovich solomon russinovich introduct russinovich object type russinovich solomon russinovich solomon russinovich object impact session isol servic driver window vista microsoft activ directori data storag microsoft truste definit msdn siyan ace definit msdn solomon russinovich refer finnel lynn mcse exam microsoft window server microsoft press isbn russinovich mark octob insid nt object manag window pro activ directori data storag microsoft retriev solomon david russinovich mark insid microsoft window third edit microsoft press isbn russinovich mark david solomon microsoft window intern edit microsoft press isbn siyan kanajit window profession refer rider isbn window nt minwin unix architectur extern link microsoft offici window site window plug play architectur microsoft window compon core aero cleartyp desktop window manag directx explor taskbar start menu shell namespac special folder file associ search save search ifilt graphic devic interfac wim gener tcpip stack server messag block net framework audio print xml paper specif activ script wsh vbscript jscript ole ole autom dcom activex activex document structur storag transact server previou version wddm uaa win consol manag tool backup restor center commandcom cmdex control panel applet devic manag disk cleanup disk defragment event viewer manag consol netsh problem report solut sysprep system configur task manag system file checker system restor window instal window powershel window updat winsat window easi transfer system polici editor applic calcul calendar charact map contact dvd maker fax scan internet explor journal mail magnifi media center meet space mobil devic center mobil center movi maker narrat notepad paint photo galleri privat charact editor remot assist sidebar snip tool sound record window media player window speech recognit wordpad game chess titan freecel heart hold em inkbal mahjong titan minesweep purbl place solitair spider solitair tinker kernel ntoskrnlex haldll system idl process svchostex registri window servic servic control manag dll exe ntldr boot manag winlogon recoveri consol io winr winp kernel patch protect servic autorun bit task schedul wireless configur shadow copi window error report multimedia class schedul clf file system ntf hard link junction point mount point repars point symbol link txf ef fatfatfat exfat cdf udf df if server domain activ directori dn group polici roam user profil folder redirect distribut transact coordin msmq window sharepoint servic window media servic right manag servic ii termin servic wsu network access protect df replic remot differenti compress print servic unix remot instal servic window deploy servic window system resourc manag hyperv architectur nt seri architectur object manag startup process vista io request packet kernel transact manag logic disk manag secur account manag window resourc protect lsass csrss smss secur uac bitlock defend dep protect media path mandatori integr control uipi window firewal secur center compat unix subsystem microsoft posix interix virtual do machin window window wow